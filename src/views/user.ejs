<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <%- include('./partials/stylesheets') %>

    <link rel="stylesheet" href="css/user.css" />

    <%- include('./partials/scripts.ejs') %>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <title>Diary Entries</title>
  </head>
  <body>
    <section id="main">
      <div class="container-fluid">
        <%- include('./partials/navbar.ejs') %>

        <div class="grid-layout">
          <div class="row-1">
            <h1>Hello, <span class="greet"><%= uname %> </span></h1>
            <h2>Pick a date to view entries from that day . . .</h2>
          </div>
          
		  <div class="row-2">
			  <div class="dateinput">
				  <form action="/user?uid=<%= uid %>" method="post">
				  <input id="example" type="date" name="selectedDate" placeholder="Select a date">
				  <button class="search-btn" type="submit">
					<em class="fas fa-search fa-lg search-icon"></em>
				  </button>
				  </form>
			  </div>
			  <ul>
				  <% entries.forEach(entry => { %>
					<li>
						<div class="entry">
							<p class="entry-date"><%= new Date(entry.timestamp).toDateString() %></p>
							<p><%= entry.content.substring(0, 70) %> ... 
								<a href="/user/entry/<%= entry._id %>?uid=<%= uid %>">Read More</a>
							</p>
						</div>
					</li>
					<% }) %>
				</ul>
		  </div>
      </div>
    </section>

    <%- include('./partials/footer') %>

	  <script>
		  $('.sign-in').hide();
	  </script>
  </body>
</html>
